import type { Tagged } from 'type-fest';
import { invariant } from './helpers';

/**
 * A string representation of an high precision decimal number (e.g., "0.1", "1000.42")
 */
export type BigDecimal = Tagged<string, 'BigDecimal'>;
export function bigDecimal(value: string | number): BigDecimal {
  const str = String(value);
  invariant(/^-?\d+(\.\d+)?$/.test(str), `Invalid BigDecimal: ${str}`);
  return str as BigDecimal;
}

/**
 * An integer representation of a blockchain chain ID.
 */
export type ChainId = Tagged<number, 'ChainId'>;
export function chainId(value: number): ChainId {
  invariant(Number.isInteger(value) && value >= 0, `Invalid ChainId: ${value}`);
  return value as ChainId;
}
